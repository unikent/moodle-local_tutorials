define(["jquery","core/ajax","core/notification"],function(a,b,c){var d=function(c){var d=[],e=[];a.each(c,function(a,b){if(b.element.length>0){var c=document.querySelector(b.element);if(!c)return void console.log("Orphaned tutorial step: "+b.id)}else delete b.element;b.seen||(e.push(b),d.push(b.id))}),e.length<=0||require(["local_tutorials/intro"],function(a){var c=a();c.setOptions({steps:e}),c.onchange(function(a){var c=d[this._currentStep];b.call([{methodname:"local_tutorials_mark_seen",args:{id:c}}])}),c.onexit(function(){}),c.oncomplete(function(){}),c.start()})},e=function(a){var e=b.call([{methodname:"local_tutorials_get_tutorials",args:{url:a}}]);e[0].done(function(a){a.length<=0||d(a)}),e[0].fail(c.exception)};return{init:function(b){a("#tutorial-play button").on("click",function(){return e(b),!1})}}});